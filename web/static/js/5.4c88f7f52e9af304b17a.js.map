{"version":3,"sources":["webpack:///src/modules/product1/components/forum/index.vue","webpack:///./src/modules/product1/components/forum/index.vue?1fda","webpack:///./src/modules/product1/components/forum/index.vue"],"names":["forum","data","text","pagination","pageNumber","pageSize","total","communityData","showMore","timer","computed","extends_default","Object","vuex_esm","watch","methods","submit","_this","this","asyncToGenerator_default","regenerator_default","a","mark","_callee","res","wrap","_context","prev","next","isLogin","abrupt","console","log","service","post","title","sent","code","getComunityData","msg","stop","bol","_this2","_callee2","_context2","startId","length","id","direction","Boolean","undefined","concat","list","init","_this3","setInterval","created","mounted","destroyed","clearInterval","components_forum","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","type","rows","model","value","callback","$$v","expression","on","click","_l","v","i","key","_s","username","_m","$event","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.4c88f7f52e9af304b17a.js","sourcesContent":["<template>\n    <div class=\"forum\">\n\n      <div class=\"top\">\n        <div class=\"label\">我来写点东西：</div>\n        <i-input v-model=\"text\" type=\"textarea\" :rows=\"4\" ></i-input>\n        <div class=\"btn\">\n          <i-button type=\"primary\" @click=\"submit\">发表</i-button>\n        </div>\n      </div>\n      <div class=\"title\" >社区空间</div>\n      <div class=\"content\">\n        <div class=\"item\" v-for=\"(v,i) in communityData\" :key=\"i\">\n          <div class=\"author\">@{{v.username}}：</div>\n          <div class=\"title\">{{v.title}}<em></em></div>\n          <div class=\"btn\">\n            <div class=\"left\">\n              <span>评论</span>\n            </div>\n          </div>\n        </div>\n        <div class=\"more\" v-if=\"showMore\" ><span @click=\"++pagination.pageNumber;getComunityData(true)\">加载更多>></span></div>\n      </div>\n\n\n    </div>\n</template>\n\n<script>\n  import {mapState, mapMutations, mapActions} from 'vuex';\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n        text: '',\n        pagination: { // 社区墙分页数据\n          pageNumber: 0,\n          pageSize: 10,\n          total: 0,\n        },\n        communityData: [], // 社区墙数据\n        showMore: false, // 是否展示 加载更多的按钮\n        timer: null, // 定时器\n      }\n\t\t},\n\t\tcomputed: {\n      ...mapState(['isLogin','userInfo']),\n    },\n\t\twatch: {},\n\t\tmethods: {\n\t\t  async submit(){\n        // 这里要先判断是否登录  只有登录了才能发表\n        if(!this.isLogin) return console.log(\"没有登录\")\n        let res = await service.post(this, '/pushMood', {title: this.text,})\n        if(res.code === 200){\n          this.getComunityData(false) // 重新获取\n          this.text = '' // 清空数据\n        }else{\n          console.log(res.msg)\n        }\n      },\n      // 获取社区墙的数据\n      async getComunityData(bol){ // bol=true代表向上查询\n        let res = await service.post(this, '/community', {\n          startId: this.communityData.length?(bol?this.communityData[this.communityData.length-1].id:this.communityData[0].id):0,\n          direction: Boolean(bol),\n          pageNumber: 0,\n          pageSize: this.pagination.pageSize\n        })\n        if(res.code === 200){\n          if(bol === true || bol === undefined){\n            this.communityData = this.communityData.concat(res.data.list)\n            this.pagination.total = res.data.total\n            this.showMore = res.data.total > res.data.list.length\n          }else{\n            this.communityData = res.data.list.concat(this.communityData)\n          }\n        }else{\n          console.log(res.msg)\n        }\n      },\n\n\t\t  init(){\n        this.getComunityData() // 获取社区墙的数据\n        this.timer = setInterval(()=>{\n          this.getComunityData(false) // 获取社区墙的数据\n        },10000)\n      }\n    },\n\t\tcreated() {\n\t\t  this.init()\n\t\t},\n\t\tmounted() {\n\t\t},\n    destroyed(){\n      clearInterval(this.timer)\n      this.timer = null\n    }\n\t}\n</script>\n\n<style lang='less' scoped>\n  .forum{\n    background: #fff;\n    height: ~\"calc(100% - 100px)\";\n    overflow: auto;\n    .al_scorll();\n    padding: 20px;\n    .top{\n      .label{\n        font-size: 16px;\n        line-height: 36px;\n        text-align: left;\n      }\n      .btn{\n        display: flex;\n        justify-content: left;\n        align-items: center;\n        height: 40px;\n      }\n      /deep/ textarea{\n        .al_scorll()\n      }\n    }\n    >.title{\n      font-size: 18px;\n      color: @themeColor;\n      height: 36px;\n    }\n    .content{\n      .item{\n        display: flex;\n        flex-direction: column;\n        align-items: flex-start;\n        margin-bottom: 14px;\n        .bor(#ccc);\n        border-radius: 4px;\n        padding: 0 8px;\n        .author{\n          display: flex;\n          justify-content: left;\n          align-items: center;\n          height: 32px;\n          font-size: 16px;\n          color: #333;\n        }\n        .title{\n          min-height: 100px;\n          display: flex;\n          justify-content: left;\n          align-items: flex-start;\n          flex-wrap: wrap;\n          text-align: left;\n          width: 100%;\n          background: #f7f7f7;\n          padding: 8px;\n          word-break: break-all;\n          font-size: 14px;\n        }\n      }\n      .more{\n        span{\n          font-size: 14px;\n          cursor: pointer;\n          &:hover{\n            border-bottom: 1px solid #ccc\n          }\n        }\n      }\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/modules/product1/components/forum/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"forum\"},[_c('div',{staticClass:\"top\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"我来写点东西：\")]),_vm._v(\" \"),_c('i-input',{attrs:{\"type\":\"textarea\",\"rows\":4},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}}),_vm._v(\" \"),_c('div',{staticClass:\"btn\"},[_c('i-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"发表\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"title\"},[_vm._v(\"社区空间\")]),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_vm._l((_vm.communityData),function(v,i){return _c('div',{key:i,staticClass:\"item\"},[_c('div',{staticClass:\"author\"},[_vm._v(\"@\"+_vm._s(v.username)+\"：\")]),_vm._v(\" \"),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(v.title)),_c('em')]),_vm._v(\" \"),_vm._m(0,true)])}),_vm._v(\" \"),(_vm.showMore)?_c('div',{staticClass:\"more\"},[_c('span',{on:{\"click\":function($event){++_vm.pagination.pageNumber;_vm.getComunityData(true)}}},[_vm._v(\"加载更多>>\")])]):_vm._e()],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"btn\"},[_c('div',{staticClass:\"left\"},[_c('span',[_vm._v(\"评论\")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ae127268\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/modules/product1/components/forum/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ae127268\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader!sass-resources-loader?{\\\"resources\\\":[\\\"/Users/alan/Desktop/Project-My/webpack-study/src/modules/product1/assets/less/global.less\\\"]}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ae127268\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-ae127268\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modules/product1/components/forum/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}